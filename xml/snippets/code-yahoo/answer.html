<p>
Der Check, ob ein User des Yahoo! Messengers online ist, funktioniert analog
zu dem Check auf ICQ UINs.
</p>

<pre><span style="color: #808080; font-style: italic;">// Contributed by Maik Gro√üe, http://about-php.de/</span>
<span style="color: #000000; font-weight: bold;">function</span> GetYahoo<span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$_yahoo</span> = <span style="color: #ff0000;">''</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>
  <span style="color: #b1b100;">if</span> <span style="color: #000000;">&#40;</span><a href="http://www.php3.de/empty"><span style="color: #000066;">empty</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$_yahoo</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">true</span>;
&nbsp;
  <span style="color: #0000ff;">$response</span> = <span style="color: #ff0000;">&quot;&quot;</span>;
  <span style="color: #b1b100;">if</span> <span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$fp</span> = <a href="http://www.php3.de/fsockopen"><span style="color: #000066;">fsockopen</span></a><span style="color: #000000;">&#40;</span><span style="color: #ff0000;">'opi.yahoo.com'</span>, <span style="color: #cc66cc;">80</span>, &amp;<span style="color: #0000ff;">$errno</span>, &amp;<span style="color: #0000ff;">$errstr</span>, <span style="color: #cc66cc;">8</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#123;</span>
    <span style="color: #0000ff;">$request</span> = <span style="color: #ff0000;">&quot;HEAD /online?u=&quot;</span>.<span style="color: #0000ff;">$_yahoo</span>.<span style="color: #ff0000;">&quot;&amp;m=t&amp;t=0 HTTP/1.0<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Host: opi.yahoo.com<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Connection: close<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>&quot;</span>;
    <a href="http://www.php3.de/fputs"><span style="color: #000066;">fputs</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$fp</span>, <span style="color: #0000ff;">$request</span><span style="color: #000000;">&#41;</span>;
    <span style="color: #b1b100;">do</span> <span style="color: #000000;">&#123;</span>
      <span style="color: #0000ff;">$response</span> = <a href="http://www.php3.de/fgets"><span style="color: #000066;">fgets</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$fp</span>, <span style="color: #cc66cc;">1024</span><span style="color: #000000;">&#41;</span>;
    <span style="color: #000000;">&#125;</span>
    <span style="color: #b1b100;">while</span> <span style="color: #000000;">&#40;</span>!<a href="http://www.php3.de/feof"><span style="color: #000066;">feof</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$fp</span><span style="color: #000000;">&#41;</span> &amp;&amp; !<a href="http://www.php3.de/stristr"><span style="color: #000066;">stristr</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$response</span>, <span style="color: #ff0000;">'Location'</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
    <a href="http://www.php3.de/fclose"><span style="color: #000066;">fclose</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$fp</span><span style="color: #000000;">&#41;</span>;
  <span style="color: #000000;">&#125;</span>
  <span style="color: #b1b100;">if</span> <span style="color: #000000;">&#40;</span><a href="http://www.php3.de/strstr"><span style="color: #000066;">strstr</span></a><span style="color: #000000;">&#40;</span><a href="http://www.php3.de/strtoupper"><span style="color: #000066;">strtoupper</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$response</span><span style="color: #000000;">&#41;</span>, <span style="color: #ff0000;">'NOT ONLINE'</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">false</span>;
  <span style="color: #b1b100;">if</span> <span style="color: #000000;">&#40;</span><a href="http://www.php3.de/strstr"><span style="color: #000066;">strstr</span></a><span style="color: #000000;">&#40;</span><a href="http://www.php3.de/strtoupper"><span style="color: #000066;">strtoupper</span></a><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">$response</span><span style="color: #000000;">&#41;</span>, <span style="color: #ff0000;">'ONLINE'</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">true</span>;
  <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">false</span>;
<span style="color: #000000;">&#125;</span>
&nbsp;
<span style="color: #808080; font-style: italic;">// Aufruf:</span>
<a href="http://www.php3.de/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">&quot;Yahoo User: 12423456 is &quot;</span>.<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>GetYahoo<span style="color: #000000;">&#40;</span><span style="color: #ff0000;">'12423456'</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> ? <span style="color: #ff0000;">&quot;online&quot;</span> : <span style="color: #ff0000;">&quot;not online&quot;</span><span style="color: #000000;">&#41;</span>.<span style="color: #ff0000;">&quot; ...&quot;</span>;</pre>

