<p>
Dateien sind nicht in "Zeilen" organisiert, die Zeilenende-Zeichen
(<tt>\n</tt> und/oder <tt>\r</tt>) sind ganz gewöhnliche Bytes im
Datenstrom. Für das Lesen vom Dateianfang bis zum nächsten
Zeilenende-Zeichen gibt es entsprechende Funktionen
(<a href="http://www.php3.de/fgets">fgets()</a>), in umgekehrter Richtung ist dies
jedoch wegen der physikalischen Organisation des Dateisystems nicht
sinnvoll möglich.
</p>

<p>
Man muss die Datei also zuerst vorwärts zeilenweise in ein Array
einlesen - das erledigt die Funktion <a href="http://www.php3.de/file">file()</a> -
und kann dann auf dieses Array beliebig, z. B. auch von hinten nach
vorne, zugreifen.
</p>

<p>
Beim Schreiben müssen die "Zeilen" nicht umständlich vorne in die
Datei eingefügt, sondern können einfach hinten an die Datei angehängt
werden; hierzu wird die Datei im Append-(Anhängen)-Modus geöffnet:
</p>

<pre>&lt;?php
  // In Datei schreiben (anhängen)
  $fp = fopen&#40;$filename, 'a+'&#41;;
  flock&#40;$fp, 2&#41; or die&#40;'Kann die Datei nicht locken'&#41;;
  fwrite&#40;$fp, &quot;$zeile\n&quot;&#41;;
  fclose&#40;$fp&#41;;
?&gt;
&nbsp;
&lt;?php
  // Datei &quot;zeilenweise&quot; in ein Array einlesen
  $array = file&#40;$filename&#41;;
&nbsp;
  // $array von vorne nach hinten durchlaufen
  foreach&#40;$array as $zeile&#41; &#123;
      echo trim&#40;$zeile&#41; . &quot;&lt;br&gt;\n&quot;;
  &#125;
&nbsp;
  // $array von hinten nach vorne durchlaufen
  $i = sizeof&#40;$array&#41;;
  while &#40;$i--&#41; &#123;
      echo trim&#40;$array&#91;$i&#93;&#41; . &quot;&lt;br&gt;\n&quot;;
  &#125;
?&gt;</pre>

<p>
<a href="http://www.php3.de/file">file()</a> liest die Zeilen <em>einschließlich</em>
der Zeilenende-Zeichen ein; da die letzte Zeile in der Datei nicht
unbedingt ein Zeilenende-Zeichen hat, sollte
<a href="http://www.php3.de/trim">trim()</a> bzw. <a href="http://www.php3.de/rtrim">rtrim()</a> angewendet
werden, um einheitliche Zeilen zu bekommen.
</p>

